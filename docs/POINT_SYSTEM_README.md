# ν¬μΈνΈ μ‹μ¤ν… λ¬Έμ„

μ΄ λ””λ ‰ν† λ¦¬λ” ν¬μΈνΈ μ‹μ¤ν…μ μ‚¬μ©μ λ° κ΄€λ¦¬μ λ§¤λ‰΄μ–Όμ„ ν¬ν•¨ν•κ³  μμµλ‹λ‹¤.

## λ¬Έμ„ λ©λ΅

### π“ [μ‚¬μ©μ λ§¤λ‰΄μ–Ό](USER_POINT_MANUAL.md)
μΌλ° μ‚¬μ©μλ¥Ό μ„ν• ν¬μΈνΈ μ‹μ¤ν… μ‚¬μ© κ°€μ΄λ“

**μ£Όμ” λ‚΄μ©:**
- ν¬μΈνΈ μ΅°ν λ° κ΄€λ¦¬
- κ³„μΆ μ •λ³΄ λ“±λ΅
- μ¶κΈ μ”μ²­ λ°©λ²•
- μ¶κΈ μ”μ²­ μ·¨μ†
- FAQ λ° λ¬Έμ  ν•΄κ²°

**λ€μƒ:** μ„λΉ„μ¤ μ΄μ© κ³ κ°

---

### π“— [κ΄€λ¦¬μ λ§¤λ‰΄μ–Ό](ADMIN_POINT_MANUAL.md)
κ΄€λ¦¬μλ¥Ό μ„ν• ν¬μΈνΈ μ¶κΈ κ΄€λ¦¬ κ°€μ΄λ“

**μ£Όμ” λ‚΄μ©:**
- μ¶κΈ μ”μ²­ κ΄€λ¦¬ λ€μ‹λ³΄λ“
- μ¶κΈ μ”μ²­ μƒμ„± (μ‚¬μ©μ λ€ν–‰)
- μ¶κΈ μ”μ²­ μΉμΈ/κ±°μ 
- μ¶κΈ μ™„λ£ μ²λ¦¬
- ν†µκ³„ λ° λ¨λ‹ν„°λ§
- λ³΄μ• λ° μ£Όμμ‚¬ν•­
- νΈλ¬λΈ”μν…

**λ€μƒ:** μ‹μ¤ν… κ΄€λ¦¬μ, μ΄μν€

---

## μ‹μ¤ν… κ°μ”

### ν¬μΈνΈ μ‹μ¤ν… νλ¦„

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ ν¬μΈνΈ μ λ¦½ β”‚
β”‚ (μΊ νμΈ λ“±) β”‚
β””β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”
       β”‚
       β†“
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ μ‚¬μ©μ/κ΄€λ¦¬μβ”‚
β”‚  μ¶κΈ μ”μ²­   β”‚
β””β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”
       β”‚
       β†“
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ λ€κΈ° (PENDING)β”‚ β† μ·¨μ† κ°€λ¥
β””β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”
       β”‚
       β†“ κ΄€λ¦¬μ κ²€ν† 
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚μΉμΈ (APPROVED)β”‚ β† ν¬μΈνΈ μ°¨κ°
β””β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”
       β”‚
       β†“ μ‹¤μ  μ΄μ²΄
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚μ™„λ£(COMPLETED)β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”

       λλ”

       β†“ κ΄€λ¦¬μ κ²€ν† 
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚κ±°μ  (REJECTED)β”‚ β† ν¬μΈνΈ μ μ§€
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

### μ£Όμ” κΈ°λ¥

#### μ‚¬μ©μ κΈ°λ¥
- β… ν¬μΈνΈ λ‚΄μ—­ μ΅°ν (μ΄ μ λ¦½, μ‚¬μ©, μ”μ—¬, λ§λ£ μμ •)
- β… μ¶κΈ κ³„μΆ μ •λ³΄ λ“±λ΅/μμ •
- β… μ¶κΈ μ”μ²­ (μµμ† 10,000P)
- β… μ¶κΈ μ”μ²­ μ·¨μ† (λ€κΈ° μƒνƒλ§)
- β… μ¶κΈ μ”μ²­ λ‚΄μ—­ μ΅°ν

#### κ΄€λ¦¬μ κΈ°λ¥
- β… μ¶κΈ μ”μ²­ λ©λ΅ μ΅°ν λ° ν•„ν„°λ§
- β… μ¶κΈ μ”μ²­ μƒμ„± (μ‚¬μ©μ λ€ν–‰)
- β… μ¶κΈ μ”μ²­ μΉμΈ (ν¬μΈνΈ μλ™ μ°¨κ°)
- β… μ¶κΈ μ”μ²­ κ±°μ  (μ‚¬μ  μ…λ ¥)
- β… μ¶κΈ μ™„λ£ μ²λ¦¬
- β… ν†µκ³„ λ€μ‹λ³΄λ“ (λ€κΈ°/μΉμΈ/μ™„λ£/μ „μ²΄)

---

## κΈ°μ  μ¤νƒ

### Backend
- **Framework**: Laravel 10
- **Language**: PHP 8.2+
- **Database**: MySQL

### Frontend
- **Template Engine**: Blade
- **CSS Framework**: Tailwind CSS
- **JavaScript**: Vanilla JS (λ¨λ‹¬, κ²€μƒ‰)

### μ£Όμ” μ»΄ν¬λ„νΈ

#### Models
- `User` - μ‚¬μ©μ μ •λ³΄ λ° ν¬μΈνΈ κ³„μ‚°
- `UserPoint` - ν¬μΈνΈ μ λ¦½/μ‚¬μ© λ‚΄μ—­
- `PointWithdrawalRequest` - μ¶κΈ μ”μ²­

#### Controllers
- `PointMypageController` - μ‚¬μ©μ ν¬μΈνΈ μ΅°ν
- `WithdrawalRequestMypageController` - μ‚¬μ©μ μ¶κΈ μ”μ²­
- `AccountMypageController` - κ³„μΆ μ •λ³΄ κ΄€λ¦¬
- `WithdrawalRequestAdminController` - κ΄€λ¦¬μ μ¶κΈ κ΄€λ¦¬

#### Enums
- `PointTypeEnum` - ν¬μΈνΈ νƒ€μ… (INCREMENT, DECREMENT)
- `WithdrawalStatusEnum` - μ¶κΈ μƒνƒ (PENDING, APPROVED, REJECTED, COMPLETED)

---

## μ£Όμ” λΌμ°νΈ

### μ‚¬μ©μ λΌμ°νΈ
```php
// ν¬μΈνΈ λ‚΄μ—­
GET /mypage/point

// κ³„μΆ μ •λ³΄
GET /mypage/account
PUT /mypage/account

// μ¶κΈ μ”μ²­
GET /mypage/withdrawal-request
POST /mypage/withdrawal-request
POST /mypage/withdrawal-request/{id}/cancel
```

### κ΄€λ¦¬μ λΌμ°νΈ
```php
// μ¶κΈ κ΄€λ¦¬
GET /admin/withdrawal-requests
GET /admin/withdrawal-requests/create
POST /admin/withdrawal-requests
POST /admin/withdrawal-requests/{id}/approve
POST /admin/withdrawal-requests/{id}/reject
POST /admin/withdrawal-requests/{id}/complete
```

---

## λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§

### users ν…μ΄λΈ” (κ³„μΆ μ •λ³΄ μ¶”κ°€)
```sql
ALTER TABLE users ADD COLUMN bank_name VARCHAR(50) NULL;
ALTER TABLE users ADD COLUMN account_number VARCHAR(50) NULL;
ALTER TABLE users ADD COLUMN account_holder VARCHAR(50) NULL;
```

### user_points ν…μ΄λΈ”
```sql
- id
- user_id (FK)
- type (ENUM: INCREMENT, DECREMENT)
- point (INT)
- description (TEXT)
- campaign_id (FK, nullable)
- expired_at (DATETIME, nullable)
- created_at
- updated_at
```

### point_withdrawal_requests ν…μ΄λΈ”
```sql
- id
- user_id (FK)
- point (INT)
- bank_name (VARCHAR)
- account_number (VARCHAR)
- account_holder (VARCHAR)
- status (ENUM: PENDING, APPROVED, REJECTED, COMPLETED)
- admin_note (TEXT, nullable)
- processed_at (DATETIME, nullable)
- processed_by (FK users, nullable)
- created_at
- updated_at
```

---

## μ„¤μ • λ° μ„¤μΉ

### λ§μ΄κ·Έλ μ΄μ… μ‹¤ν–‰
```bash
# κ³„μΆ μ •λ³΄ μ»¬λΌ μ¶”κ°€
docker-compose exec web php artisan migrate

# λλ” νΉμ • λ§μ΄κ·Έλ μ΄μ…λ§
docker-compose exec web php artisan migrate --path=/database/migrations/2025_11_17_225000_add_bank_account_to_users_table.php
```

### μ‹λ” μ‹¤ν–‰ (ν…μ¤νΈμ©)
```bash
# ν¬μΈνΈ μ¶κΈ ν…μ¤νΈ λ°μ΄ν„° μƒμ„±
docker-compose exec web php artisan db:seed --class=PointWithdrawalSeeder
```

**μƒμ„±λλ” λ°μ΄ν„°:**
- ν…μ¤νΈ μ‚¬μ©μ (test@example.com)
- ν¬μΈνΈ μ λ¦½: 60,000P
- ν¬μΈνΈ μ‚¬μ©: 5,000P
- μ”μ—¬ ν¬μΈνΈ: 55,000P
- μ¶κΈ μ”μ²­ μƒν”: 4κ±΄ (λ€κΈ° 1, μΉμΈ 1, μ™„λ£ 1, κ±°μ  1)

---

## λ³΄μ• κ³ λ ¤μ‚¬ν•­

### 1. μΈμ¦ λ° κ¶ν•
- λ¨λ“  ν¬μΈνΈ κ΄€λ ¨ κΈ°λ¥μ€ μΈμ¦ ν•„μ” (`auth:sanctum`)
- κ΄€λ¦¬μ κΈ°λ¥μ€ κ΄€λ¦¬μ κ¶ν• ν™•μΈ ν•„μ”
- CSRF ν† ν° κ²€μ¦ (`@csrf`)

### 2. λ°μ΄ν„° λ³΄νΈ
- κ³„μΆ μ •λ³΄λ” λ―Όκ° μ •λ³΄λ΅ μ·¨κΈ‰
- μ‚¬μ©μ λ³ΈμΈλ§ μμ‹ μ ν¬μΈνΈ λ° κ³„μΆ μ •λ³΄ μ ‘κ·Ό κ°€λ¥
- κ΄€λ¦¬μλ” μ—…λ¬΄ λ©μ μΌλ΅λ§ μ ‘κ·Ό

### 3. μ…λ ¥ κ²€μ¦
- λ¨λ“  μ…λ ¥κ°’ μ„λ²„ μ‚¬μ΄λ“ κ²€μ¦
- μ¶κΈ ν¬μΈνΈ λ²”μ„ ν™•μΈ (μµμ† 10,000P)
- μ‚¬μ© κ°€λ¥ ν¬μΈνΈ μ΄κ³Ό λ°©μ§€
- SQL Injection, XSS λ°©μ§€

### 4. νΈλμ­μ… μ²λ¦¬
- μ¶κΈ μΉμΈ μ‹ ν¬μΈνΈ μ°¨κ°μ€ νΈλμ­μ… μ²λ¦¬
- λ™μ‹μ„± μ μ–΄ (μ¤‘λ³µ μ²λ¦¬ λ°©μ§€)

---

## ν…μ¤νΈ μ‹λ‚λ¦¬μ¤

### μ‚¬μ©μ ν…μ¤νΈ
1. β… ν¬μΈνΈ λ‚΄μ—­ μ΅°ν
2. β… κ³„μΆ μ •λ³΄ λ“±λ΅
3. β… κ³„μΆ μ •λ³΄ μμ •
4. β… μ¶κΈ μ”μ²­ (μ •μƒ)
5. β… μ¶κΈ μ”μ²­ (ν¬μΈνΈ λ¶€μ΅±)
6. β… μ¶κΈ μ”μ²­ (μµμ† κΈμ•΅ λ―Έλ§)
7. β… μ¶κΈ μ”μ²­ μ·¨μ†
8. β… κ³„μΆ μ •λ³΄ μλ™ μ…λ ¥ ν™•μΈ

### κ΄€λ¦¬μ ν…μ¤νΈ
1. β… μ¶κΈ μ”μ²­ λ©λ΅ μ΅°ν
2. β… ν•„ν„°λ§ (μƒνƒ, λ‚ μ§)
3. β… μ‚¬μ©μ κ²€μƒ‰
4. β… μ¶κΈ μ”μ²­ μƒμ„± (μ‚¬μ©μ λ€ν–‰)
5. β… μ¶κΈ μ”μ²­ μΉμΈ (ν¬μΈνΈ μ°¨κ° ν™•μΈ)
6. β… μ¶κΈ μ”μ²­ κ±°μ  (μ‚¬μ  μ…λ ¥)
7. β… μ¶κΈ μ™„λ£ μ²λ¦¬
8. β… ν†µκ³„ μ •λ³΄ ν™•μΈ

---

## λ¬Έμ  ν•΄κ²°

### λ¬Έμ : κ³„μΆ μ •λ³΄κ°€ μ €μ¥λμ§€ μ•μ
**ν•΄κ²°:** User λ¨λΈμ `$fillable` λ°°μ—΄μ— `bank_name`, `account_number`, `account_holder` μ¶”κ°€ ν™•μΈ

### λ¬Έμ : μ¶κΈ μ”μ²­ μƒμ„± λ²„νΌμ΄ μ• λ³΄μ„
**ν•΄κ²°:** λΌμ°νΈ λ“±λ΅ ν™•μΈ (`routes/admin.php`)

### λ¬Έμ : μΉμΈ μ‹ ν¬μΈνΈκ°€ μ°¨κ°λμ§€ μ•μ
**ν•΄κ²°:** `approve()` λ©”μ„λ“μ ν¬μΈνΈ μ°¨κ° λ΅μ§ ν™•μΈ

### λ¬Έμ : μ‚¬μ©μ κ²€μƒ‰μ΄ μ• λ¨
**ν•΄κ²°:** JavaScript μ‹¤μ‹κ°„ κ²€μƒ‰ κΈ°λ¥ ν™•μΈ, 0.5μ΄ λ”λ μ΄ ν›„ λ™μ‘

---

## ν–¥ν›„ κ°μ„  μ‚¬ν•­

### κΈ°λ¥ κ°μ„ 
- [ ] μ‚¬μ©μ μ•λ¦Ό μ‹μ¤ν… (μ¶κΈ μƒνƒ λ³€κ²½ μ‹)
- [ ] μ΄λ©”μΌ λλ” SMS μ•λ¦Ό
- [ ] μ¶κΈ λ‚΄μ—­ Excel λ‹¤μ΄λ΅λ“
- [ ] λ€λ‰ μΉμΈ/κ±°μ  κΈ°λ¥
- [ ] μ¶κΈ μ¤μΌ€μ¤„λ§ (νΉμ • λ‚ μ§μ— μλ™ μ²λ¦¬)

### UI/UX κ°μ„ 
- [ ] λ¨λ°”μΌ λ°μ‘ν• μµμ ν™”
- [ ] λ‹¤ν¬ λ¨λ“ μ§€μ›
- [ ] μ‚¬μ©μ λ€μ‹λ³΄λ“μ— μ¶κΈ ν†µκ³„ μ¶”κ°€
- [ ] μ¶κΈ μ”μ²­ μ§„ν–‰ μƒν™© νƒ€μ„λΌμΈ

### μ„±λ¥ μµμ ν™”
- [ ] ν¬μΈνΈ κ³„μ‚° μΊμ‹±
- [ ] λ€λ‰ λ°μ΄ν„° νμ΄μ§€λ„¤μ΄μ… μµμ ν™”
- [ ] μΈλ±μ¤ μµμ ν™”

### λ³΄μ• κ°•ν™”
- [ ] 2λ‹¨κ³„ μΈμ¦ (μ¶κΈ μ‹)
- [ ] IP μ£Όμ† κΈ°λ΅ λ° μ΄μƒ νƒμ§€
- [ ] μΌμΌ μ¶κΈ ν•λ„ μ„¤μ •
- [ ] κ³„μΆ μ •λ³΄ λ³€κ²½ μ΄λ ¥ μ¶”μ 

---

## λ¬Έμ λ° μ§€μ›

### κ°λ°ν€
- **μ΄λ©”μΌ**: dev@example.com
- **Slack**: #dev-team
- **μ΄μ νΈλμ»¤**: GitHub Issues

### μ΄μν€
- **μ΄λ©”μΌ**: ops@example.com
- **Slack**: #ops-team

### κΈ΄κΈ‰ μ§€μ›
- **μ „ν™”**: 1588-XXXX
- **μμ—…μ‹κ°„**: ν‰μΌ 09:00~18:00

---

## λΌμ΄μ„ μ¤
Copyright Β© 2025 Company Name. All rights reserved.

---

**λ¬Έμ„ λ²„μ „**: 1.0
**μµμΆ… μμ •μΌ**: 2025-11-17
**μ‘μ„±μ**: κ°λ°ν€
