# 포인트 시스템 관리자 매뉴얼

## 목차
1. [개요](#개요)
2. [출금 요청 관리](#출금-요청-관리)
3. [출금 요청 생성](#출금-요청-생성)
4. [출금 요청 승인](#출금-요청-승인)
5. [출금 요청 거절](#출금-요청-거절)
6. [출금 완료 처리](#출금-완료-처리)
7. [통계 및 모니터링](#통계-및-모니터링)
8. [주의사항](#주의사항)

---

## 개요

### 포인트 시스템 구조
```
사용자 포인트 적립
    ↓
출금 요청 (사용자 또는 관리자)
    ↓
대기 (PENDING)
    ↓
승인 (APPROVED) ← 포인트 차감
    ↓
완료 (COMPLETED) ← 실제 입금 완료
```

### 출금 상태 흐름

| 상태 | 설명 | 색상 | 가능한 액션 |
|------|------|------|------------|
| 대기 (PENDING) | 관리자 검토 대기 | 노란색 | 승인, 거절 |
| 승인 (APPROVED) | 승인 완료, 입금 대기 | 파란색 | 완료 처리 |
| 완료 (COMPLETED) | 입금 완료 | 초록색 | 없음 |
| 거절 (REJECTED) | 승인 거절 | 빨간색 | 없음 |

### 관리자 권한
출금 요청 관리는 관리자 권한을 가진 사용자만 접근 가능합니다.

---

## 출금 요청 관리

### 접근 경로
```
관리자 > 출금 요청 관리
또는
/admin/withdrawal-requests
```

### 대시보드 화면 구성

#### 1. 통계 카드
- **대기 중**: 승인 대기 중인 요청 건수 및 총 금액
- **승인**: 승인된 요청 건수
- **완료**: 완료 처리된 요청 건수
- **전체**: 전체 요청 건수

#### 2. 필터 기능
출금 요청을 다음 조건으로 필터링할 수 있습니다:
- **상태**: 전체, 대기, 승인, 거절, 완료
- **시작일**: 요청 시작 날짜
- **종료일**: 요청 종료 날짜

#### 3. 출금 요청 목록
각 요청의 상세 정보를 표시합니다:
- ID
- 신청일
- 사용자 정보 (이름, 이메일)
- 출금 포인트
- 계좌 정보 (은행명, 계좌번호, 예금주)
- 상태
- 관리자 메모
- 처리일 및 처리자
- 액션 버튼

---

## 출금 요청 생성

관리자가 사용자를 대신하여 출금 요청을 생성할 수 있습니다.

### 사용 시나리오
- 사용자가 직접 요청하지 못하는 경우
- 고객 지원 요청으로 대행 처리
- 캠페인 보상 지급

### 생성 절차

#### 1단계: 생성 페이지 접속
```
관리자 > 출금 요청 관리 > 출금 요청 생성
또는
/admin/withdrawal-requests/create
```

#### 2단계: 사용자 선택
1. **사용자 검색**
   - 검색창에 이름, 이메일, 닉네임 입력
   - 실시간 검색 (0.5초 딜레이)
   - 최대 50명까지 표시

2. **사용자 선택**
   - 라디오 버튼으로 사용자 선택
   - 선택 시 사용자 정보 자동 표시:
     - 이름
     - 이메일
     - 사용 가능 포인트

#### 3단계: 출금 정보 입력
1. **출금 포인트**
   - 최소 10,000P
   - 사용자의 사용 가능 포인트 이내
   - 1,000P 단위 권장

#### 4단계: 계좌 정보 입력
1. **계좌 정보 불러오기** (선택)
   - 사용자가 등록한 계좌 정보가 있는 경우
   - "사용자 계좌 정보 불러오기" 버튼 클릭
   - 자동으로 은행명, 계좌번호, 예금주 입력

2. **수동 입력** (필수)
   - 은행명: 예) 국민은행
   - 계좌번호: '-' 없이 숫자만
   - 예금주: 본인 명의 확인

#### 5단계: 제출
- "출금 요청 생성" 버튼 클릭
- 검증 후 대기 상태로 생성

### 검증 규칙
- 사용자 선택 필수
- 출금 포인트 ≥ 10,000P
- 출금 포인트 ≤ 사용자의 사용 가능 포인트
- 계좌 정보 필수 입력

### 생성 후
- 대기 상태로 생성
- 출금 요청 목록으로 자동 이동
- 성공 메시지 표시

---

## 출금 요청 승인

### 승인 조건
- 상태가 **대기**인 경우에만 가능
- 사용자의 포인트가 충분한지 확인

### 승인 절차

#### 1단계: 요청 검토
1. 출금 요청 목록에서 대기 중인 요청 확인
2. 사용자 정보 확인
   - 사용자 이름 클릭 시 사용자 상세 페이지로 이동
   - 사용자의 포인트 내역 확인 가능
3. 계좌 정보 확인
   - 은행명, 계좌번호, 예금주 검증
   - 사용자 이름과 예금주 일치 여부 확인

#### 2단계: 승인 실행
1. "승인" 버튼 클릭
2. 승인 모달 창 표시
3. **승인 메모** 입력 (선택)
   - 승인 사유 또는 참고 사항 입력
   - 최대 500자
4. "승인" 버튼 클릭

#### 3단계: 자동 처리
승인 시 다음 작업이 자동으로 수행됩니다:

1. **상태 변경**
   - 대기 → 승인

2. **포인트 차감**
   - 사용자 포인트에서 출금 금액 차감
   - 포인트 내역에 "[출금] 포인트 출금 신청 승인" 기록

3. **처리 정보 기록**
   - 처리 일시: 현재 시각
   - 처리자: 승인한 관리자 ID

4. **상태 표시**
   - 목록에서 파란색 "승인" 배지로 표시
   - "완료 처리" 버튼 활성화

### 승인 후 조치
1. 실제 계좌 이체 진행
2. 이체 완료 후 "완료 처리" 진행

---

## 출금 요청 거절

### 거절 사유 예시
- 계좌 정보 불일치
- 본인 명의 계좌 아님
- 사용자 활동 규정 위반
- 포인트 획득 방법 문제
- 기타 부정 행위

### 거절 절차

#### 1단계: 거절 결정
1. 출금 요청 목록에서 대기 중인 요청 확인
2. 거절 사유 확인
3. 필요 시 사용자에게 사전 연락

#### 2단계: 거절 실행
1. "거절" 버튼 클릭
2. 거절 모달 창 표시
3. **거절 사유** 입력 (필수)
   - 구체적인 거절 사유 입력
   - 사용자가 확인할 수 있으므로 명확하게 작성
   - 최대 500자
4. "거절" 버튼 클릭

#### 3단계: 자동 처리
거절 시 다음 작업이 자동으로 수행됩니다:

1. **상태 변경**
   - 대기 → 거절

2. **포인트 유지**
   - 포인트는 차감되지 않음
   - 사용자는 다시 출금 요청 가능

3. **처리 정보 기록**
   - 처리 일시: 현재 시각
   - 처리자: 거절한 관리자 ID
   - 거절 사유: 입력한 메모

4. **상태 표시**
   - 목록에서 빨간색 "거절" 배지로 표시
   - 더 이상 액션 불가

### 거절 후 조치
1. 필요 시 사용자에게 거절 사유 안내
2. 사용자 문의 대응 준비

---

## 출금 완료 처리

### 완료 처리 조건
- 상태가 **승인**인 경우에만 가능
- 실제 계좌 이체 완료 후 진행

### 완료 처리 절차

#### 1단계: 이체 확인
1. 승인된 출금 요청의 계좌 정보 확인
2. 은행 또는 이체 시스템을 통해 실제 이체 진행
3. 이체 완료 확인

#### 2단계: 완료 처리 실행
1. "완료 처리" 버튼 클릭
2. 완료 처리 모달 창 표시
3. **완료 메모** 입력 (선택)
   - 이체 완료 정보 또는 참고 사항 입력
   - 최대 500자
   - 예) "2025-11-17 15:30 이체 완료"
4. "완료 처리" 버튼 클릭

#### 3단계: 자동 처리
완료 처리 시 다음 작업이 자동으로 수행됩니다:

1. **상태 변경**
   - 승인 → 완료

2. **완료 정보 기록**
   - 완료 메모 저장
   - 기존 처리 일시 및 처리자 유지

3. **상태 표시**
   - 목록에서 초록색 "완료" 배지로 표시
   - 더 이상 액션 불가

### 완료 후 조치
1. 사용자에게 완료 안내 (선택)
2. 이체 증빙 자료 보관

---

## 통계 및 모니터링

### 실시간 통계
대시보드 상단에서 다음 통계를 실시간으로 확인할 수 있습니다:

1. **대기 중**
   - 건수: 승인 대기 중인 요청 수
   - 금액: 대기 중인 총 출금 포인트
   - 빠른 조치 필요

2. **승인**
   - 건수: 승인 완료, 이체 대기 중인 요청 수
   - 이체 진행 필요

3. **완료**
   - 건수: 이체 완료된 요청 수
   - 처리 완료

4. **전체**
   - 건수: 필터 조건에 해당하는 전체 요청 수

### 필터링 및 검색
효율적인 관리를 위한 필터 기능:

1. **상태 필터**
   - 대기, 승인, 거절, 완료 중 선택
   - 해당 상태의 요청만 표시

2. **날짜 필터**
   - 시작일 ~ 종료일 범위 지정
   - 해당 기간의 요청만 표시

3. **초기화**
   - 모든 필터 조건 제거
   - 전체 요청 표시

### 사용자 상세 정보
출금 요청 목록에서 사용자 이름 클릭 시:
- 사용자 상세 페이지로 이동
- 사용자의 전체 정보 확인
- 포인트 내역 확인
- 활동 이력 확인

---

## 주의사항

### 승인 전 필수 확인사항

#### 1. 사용자 정보 확인
- [ ] 사용자 이름 확인
- [ ] 사용자 활동 이력 확인
- [ ] 포인트 적립 내역 정상 여부

#### 2. 계좌 정보 확인
- [ ] 예금주가 사용자 이름과 일치하는지
- [ ] 계좌번호 형식이 올바른지
- [ ] 은행명이 정확한지

#### 3. 포인트 확인
- [ ] 출금 요청 포인트가 사용 가능 포인트 이내인지
- [ ] 비정상적인 포인트 적립이 없는지
- [ ] 중복 요청이 없는지

### 거절 시 주의사항

#### 1. 명확한 사유 작성
- 사용자가 이해할 수 있도록 구체적으로 작성
- 규정 위반 시 해당 규정 명시
- 개선 방법 안내 (가능한 경우)

#### 2. 예시
**좋은 예:**
```
계좌 정보가 본인 명의가 아닙니다. 반드시 본인 명의의 계좌로 다시 요청해주세요.
```

**나쁜 예:**
```
거절
```

### 승인 후 취소 불가
- **중요**: 승인 후에는 포인트가 차감되므로 취소할 수 없습니다.
- 승인 전 반드시 모든 정보를 재확인하세요.
- 승인 후 문제 발생 시 별도 처리 필요 (고객지원팀 협의)

### 보안 및 개인정보 보호

#### 1. 계좌 정보 취급
- 계좌 정보는 민감 정보입니다.
- 외부 유출 금지
- 업무 목적 외 사용 금지

#### 2. 사용자 정보 보호
- 사용자 정보 무단 조회 금지
- 업무 필요 시에만 접근
- 정보 유출 시 법적 책임

#### 3. 처리 기록
- 모든 처리 내역은 자동으로 기록됩니다.
- 처리자 정보가 저장됩니다.
- 책임 소재 추적 가능

---

## 처리 가이드라인

### 일반적인 처리 시간

| 단계 | 목표 시간 | 최대 시간 |
|------|----------|----------|
| 대기 → 승인 | 1영업일 | 2영업일 |
| 승인 → 완료 | 2영업일 | 3영업일 |
| 전체 프로세스 | 3영업일 | 5영업일 |

### 우선순위 처리
다음 경우 우선 처리를 고려하세요:
1. 고액 출금 요청 (100,000P 이상)
2. VIP 사용자
3. 긴급 요청 (고객지원팀 에스컬레이션)
4. 대기 기간이 긴 요청

### 의심스러운 요청 처리
다음 경우 추가 검증을 진행하세요:

1. **비정상적인 포인트 적립**
   - 단기간 대량 적립
   - 패턴이 이상한 적립

2. **계좌 정보 의심**
   - 예금주 불일치
   - 자주 변경되는 계좌

3. **규정 위반 의심**
   - 리뷰 허위 작성
   - 캠페인 부정 참여

**조치:**
- 즉시 승인하지 말고 보류
- 해당 사용자 활동 이력 전수 조사
- 필요 시 고객지원팀 또는 보안팀 협의
- 명확한 증거 확보 후 승인 또는 거절

---

## 트러블슈팅

### 문제 1: 승인 버튼이 보이지 않음
**원인:**
- 이미 승인, 거절, 완료된 요청
- 대기 상태가 아님

**해결:**
- 요청 상태 확인
- 대기 상태인 요청만 승인 가능

### 문제 2: 승인 시 에러 발생
**원인:**
- 사용자 포인트 부족
- 이미 처리된 요청
- 동시 처리 시도

**해결:**
- 사용자 포인트 확인
- 페이지 새로고침 후 다시 시도
- 요청 상태 재확인

### 문제 3: 완료 처리 버튼이 보이지 않음
**원인:**
- 승인 상태가 아님
- 이미 완료 또는 거절됨

**해결:**
- 요청 상태 확인
- 승인 상태인 요청만 완료 처리 가능

### 문제 4: 사용자 검색이 안 됨
**원인:**
- 검색어 오타
- 사용자 미등록
- 네트워크 지연

**해결:**
- 검색어 정확히 입력
- 0.5초 대기 후 자동 검색
- 페이지 새로고침

---

## 베스트 프랙티스

### 1. 정기적인 모니터링
- 하루 2회 이상 대기 중인 요청 확인
- 대기 건수가 누적되지 않도록 관리
- 목표 처리 시간 준수

### 2. 신속한 처리
- 대기 요청은 가능한 빨리 검토
- 의심스러운 경우에도 2영업일 이내 결정
- 지연 시 사용자 불만 증가

### 3. 명확한 커뮤니케이션
- 거절 시 구체적인 사유 작성
- 필요 시 사용자에게 사전 연락
- 처리 완료 후 안내 메시지 발송 (선택)

### 4. 정확한 기록
- 모든 처리에 메모 작성 권장
- 특이사항 반드시 기록
- 향후 참고 자료로 활용

### 5. 보안 의식
- 계좌 정보 취급 주의
- 의심스러운 요청 즉시 보고
- 개인정보 보호 준수

---

## 관련 기능

### 사용자 포인트 직접 차감
필요 시 관리자가 사용자의 포인트를 직접 차감할 수 있습니다:

```
관리자 > 사용자 관리 > 사용자 상세 > 포인트 차감
```

**사용 시나리오:**
- 규정 위반으로 인한 페널티
- 오적립 포인트 회수
- 기타 관리적 조치

### 포인트 적립
캠페인 완료 또는 특별 이벤트 시 포인트를 적립할 수 있습니다:

```
관리자 > 캠페인 관리 > 신청 관리 > 완료 처리
```

---

## 문의 및 지원

### 기술 지원
- 개발팀 이메일: dev@example.com
- 시스템 오류 발생 시 즉시 보고

### 정책 문의
- 운영팀 이메일: ops@example.com
- 처리 가이드라인 관련 문의

### 긴급 상황
- 긴급 연락처: 010-XXXX-XXXX
- 영업 시간: 평일 09:00~18:00

---

**문서 버전**: 1.0
**최종 수정일**: 2025-11-17
**작성자**: 개발팀
**승인자**: 운영팀
